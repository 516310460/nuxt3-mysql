{
  "version": 3,
  "sources": ["../../../../node_modules/hookable/dist/index.mjs"],
  "sourcesContent": ["function flatHooks(configHooks, hooks = {}, parentName) {\n  for (const key in configHooks) {\n    const subHook = configHooks[key];\n    const name = parentName ? `${parentName}:${key}` : key;\n    if (typeof subHook === \"object\" && subHook !== null) {\n      flatHooks(subHook, hooks, name);\n    } else if (typeof subHook === \"function\") {\n      hooks[name] = subHook;\n    }\n  }\n  return hooks;\n}\nfunction mergeHooks(...hooks) {\n  const finalHooks = {};\n  for (const hook of hooks) {\n    const flatenHook = flatHooks(hook);\n    for (const key in flatenHook) {\n      if (finalHooks[key]) {\n        finalHooks[key].push(flatenHook[key]);\n      } else {\n        finalHooks[key] = [flatenHook[key]];\n      }\n    }\n  }\n  for (const key in finalHooks) {\n    if (finalHooks[key].length > 1) {\n      const arr = finalHooks[key];\n      finalHooks[key] = (...args) => serial(arr, (fn) => fn(...args));\n    } else {\n      finalHooks[key] = finalHooks[key][0];\n    }\n  }\n  return finalHooks;\n}\nfunction serial(tasks, fn) {\n  return tasks.reduce((promise, task) => promise.then(() => fn(task)), Promise.resolve(null));\n}\nfunction serialCaller(hooks, args) {\n  return hooks.reduce((promise, hookFn) => promise.then(() => hookFn.apply(void 0, args)), Promise.resolve(null));\n}\nfunction parallelCaller(hooks, args) {\n  return Promise.all(hooks.map((hook) => hook.apply(void 0, args)));\n}\n\nclass Hookable {\n  constructor() {\n    this._hooks = {};\n    this._deprecatedHooks = {};\n    this.hook = this.hook.bind(this);\n    this.callHook = this.callHook.bind(this);\n    this.callHookWith = this.callHookWith.bind(this);\n  }\n  hook(name, fn) {\n    if (!name || typeof fn !== \"function\") {\n      return () => {\n      };\n    }\n    const originalName = name;\n    let deprecatedHookObj;\n    while (this._deprecatedHooks[name]) {\n      const deprecatedHook = this._deprecatedHooks[name];\n      if (typeof deprecatedHook === \"string\") {\n        deprecatedHookObj = { to: deprecatedHook };\n      } else {\n        deprecatedHookObj = deprecatedHook;\n      }\n      name = deprecatedHookObj.to;\n    }\n    if (deprecatedHookObj) {\n      if (!deprecatedHookObj.message) {\n        console.warn(`${originalName} hook has been deprecated` + (deprecatedHookObj.to ? `, please use ${deprecatedHookObj.to}` : \"\"));\n      } else {\n        console.warn(deprecatedHookObj.message);\n      }\n    }\n    this._hooks[name] = this._hooks[name] || [];\n    this._hooks[name].push(fn);\n    return () => {\n      if (fn) {\n        this.removeHook(name, fn);\n        fn = null;\n      }\n    };\n  }\n  hookOnce(name, fn) {\n    let _unreg;\n    let _fn = (...args) => {\n      _unreg();\n      _unreg = null;\n      _fn = null;\n      return fn(...args);\n    };\n    _unreg = this.hook(name, _fn);\n    return _unreg;\n  }\n  removeHook(name, fn) {\n    if (this._hooks[name]) {\n      const idx = this._hooks[name].indexOf(fn);\n      if (idx !== -1) {\n        this._hooks[name].splice(idx, 1);\n      }\n      if (this._hooks[name].length === 0) {\n        delete this._hooks[name];\n      }\n    }\n  }\n  deprecateHook(name, deprecated) {\n    this._deprecatedHooks[name] = deprecated;\n  }\n  deprecateHooks(deprecatedHooks) {\n    Object.assign(this._deprecatedHooks, deprecatedHooks);\n  }\n  addHooks(configHooks) {\n    const hooks = flatHooks(configHooks);\n    const removeFns = Object.keys(hooks).map((key) => this.hook(key, hooks[key]));\n    return () => {\n      removeFns.splice(0, removeFns.length).forEach((unreg) => unreg());\n    };\n  }\n  removeHooks(configHooks) {\n    const hooks = flatHooks(configHooks);\n    for (const key in hooks) {\n      this.removeHook(key, hooks[key]);\n    }\n  }\n  callHook(name, ...args) {\n    return serialCaller(this._hooks[name] || [], args);\n  }\n  callHookParallel(name, ...args) {\n    return parallelCaller(this._hooks[name] || [], args);\n  }\n  callHookWith(caller, name, ...args) {\n    return caller(this._hooks[name] || [], args);\n  }\n}\nfunction createHooks() {\n  return new Hookable();\n}\n\nexport { Hookable, createHooks, flatHooks, mergeHooks, parallelCaller, serial, serialCaller };\n"],
  "mappings": ";AAAA,SAAS,UAAU,aAAa,QAAQ,CAAC,GAAG,YAAY;AACtD,aAAW,OAAO,aAAa;AAC7B,UAAM,UAAU,YAAY;AAC5B,UAAM,OAAO,aAAa,GAAG,cAAc,QAAQ;AACnD,QAAI,OAAO,YAAY,YAAY,YAAY,MAAM;AACnD,gBAAU,SAAS,OAAO,IAAI;AAAA,IAChC,WAAW,OAAO,YAAY,YAAY;AACxC,YAAM,QAAQ;AAAA,IAChB;AAAA,EACF;AACA,SAAO;AACT;AACA,SAAS,cAAc,OAAO;AAC5B,QAAM,aAAa,CAAC;AACpB,aAAW,QAAQ,OAAO;AACxB,UAAM,aAAa,UAAU,IAAI;AACjC,eAAW,OAAO,YAAY;AAC5B,UAAI,WAAW,MAAM;AACnB,mBAAW,KAAK,KAAK,WAAW,IAAI;AAAA,MACtC,OAAO;AACL,mBAAW,OAAO,CAAC,WAAW,IAAI;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AACA,aAAW,OAAO,YAAY;AAC5B,QAAI,WAAW,KAAK,SAAS,GAAG;AAC9B,YAAM,MAAM,WAAW;AACvB,iBAAW,OAAO,IAAI,SAAS,OAAO,KAAK,CAAC,OAAO,GAAG,GAAG,IAAI,CAAC;AAAA,IAChE,OAAO;AACL,iBAAW,OAAO,WAAW,KAAK;AAAA,IACpC;AAAA,EACF;AACA,SAAO;AACT;AACA,SAAS,OAAO,OAAO,IAAI;AACzB,SAAO,MAAM,OAAO,CAAC,SAAS,SAAS,QAAQ,KAAK,MAAM,GAAG,IAAI,CAAC,GAAG,QAAQ,QAAQ,IAAI,CAAC;AAC5F;AACA,SAAS,aAAa,OAAO,MAAM;AACjC,SAAO,MAAM,OAAO,CAAC,SAAS,WAAW,QAAQ,KAAK,MAAM,OAAO,MAAM,QAAQ,IAAI,CAAC,GAAG,QAAQ,QAAQ,IAAI,CAAC;AAChH;AACA,SAAS,eAAe,OAAO,MAAM;AACnC,SAAO,QAAQ,IAAI,MAAM,IAAI,CAAC,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,CAAC;AAClE;AAEA,IAAM,WAAN,MAAe;AAAA,EACb,cAAc;AACZ,SAAK,SAAS,CAAC;AACf,SAAK,mBAAmB,CAAC;AACzB,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAC/B,SAAK,WAAW,KAAK,SAAS,KAAK,IAAI;AACvC,SAAK,eAAe,KAAK,aAAa,KAAK,IAAI;AAAA,EACjD;AAAA,EACA,KAAK,MAAM,IAAI;AACb,QAAI,CAAC,QAAQ,OAAO,OAAO,YAAY;AACrC,aAAO,MAAM;AAAA,MACb;AAAA,IACF;AACA,UAAM,eAAe;AACrB,QAAI;AACJ,WAAO,KAAK,iBAAiB,OAAO;AAClC,YAAM,iBAAiB,KAAK,iBAAiB;AAC7C,UAAI,OAAO,mBAAmB,UAAU;AACtC,4BAAoB,EAAE,IAAI,eAAe;AAAA,MAC3C,OAAO;AACL,4BAAoB;AAAA,MACtB;AACA,aAAO,kBAAkB;AAAA,IAC3B;AACA,QAAI,mBAAmB;AACrB,UAAI,CAAC,kBAAkB,SAAS;AAC9B,gBAAQ,KAAK,GAAG,2CAA2C,kBAAkB,KAAK,gBAAgB,kBAAkB,OAAO,GAAG;AAAA,MAChI,OAAO;AACL,gBAAQ,KAAK,kBAAkB,OAAO;AAAA,MACxC;AAAA,IACF;AACA,SAAK,OAAO,QAAQ,KAAK,OAAO,SAAS,CAAC;AAC1C,SAAK,OAAO,MAAM,KAAK,EAAE;AACzB,WAAO,MAAM;AACX,UAAI,IAAI;AACN,aAAK,WAAW,MAAM,EAAE;AACxB,aAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EACA,SAAS,MAAM,IAAI;AACjB,QAAI;AACJ,QAAI,MAAM,IAAI,SAAS;AACrB,aAAO;AACP,eAAS;AACT,YAAM;AACN,aAAO,GAAG,GAAG,IAAI;AAAA,IACnB;AACA,aAAS,KAAK,KAAK,MAAM,GAAG;AAC5B,WAAO;AAAA,EACT;AAAA,EACA,WAAW,MAAM,IAAI;AACnB,QAAI,KAAK,OAAO,OAAO;AACrB,YAAM,MAAM,KAAK,OAAO,MAAM,QAAQ,EAAE;AACxC,UAAI,QAAQ,IAAI;AACd,aAAK,OAAO,MAAM,OAAO,KAAK,CAAC;AAAA,MACjC;AACA,UAAI,KAAK,OAAO,MAAM,WAAW,GAAG;AAClC,eAAO,KAAK,OAAO;AAAA,MACrB;AAAA,IACF;AAAA,EACF;AAAA,EACA,cAAc,MAAM,YAAY;AAC9B,SAAK,iBAAiB,QAAQ;AAAA,EAChC;AAAA,EACA,eAAe,iBAAiB;AAC9B,WAAO,OAAO,KAAK,kBAAkB,eAAe;AAAA,EACtD;AAAA,EACA,SAAS,aAAa;AACpB,UAAM,QAAQ,UAAU,WAAW;AACnC,UAAM,YAAY,OAAO,KAAK,KAAK,EAAE,IAAI,CAAC,QAAQ,KAAK,KAAK,KAAK,MAAM,IAAI,CAAC;AAC5E,WAAO,MAAM;AACX,gBAAU,OAAO,GAAG,UAAU,MAAM,EAAE,QAAQ,CAAC,UAAU,MAAM,CAAC;AAAA,IAClE;AAAA,EACF;AAAA,EACA,YAAY,aAAa;AACvB,UAAM,QAAQ,UAAU,WAAW;AACnC,eAAW,OAAO,OAAO;AACvB,WAAK,WAAW,KAAK,MAAM,IAAI;AAAA,IACjC;AAAA,EACF;AAAA,EACA,SAAS,SAAS,MAAM;AACtB,WAAO,aAAa,KAAK,OAAO,SAAS,CAAC,GAAG,IAAI;AAAA,EACnD;AAAA,EACA,iBAAiB,SAAS,MAAM;AAC9B,WAAO,eAAe,KAAK,OAAO,SAAS,CAAC,GAAG,IAAI;AAAA,EACrD;AAAA,EACA,aAAa,QAAQ,SAAS,MAAM;AAClC,WAAO,OAAO,KAAK,OAAO,SAAS,CAAC,GAAG,IAAI;AAAA,EAC7C;AACF;AACA,SAAS,cAAc;AACrB,SAAO,IAAI,SAAS;AACtB;",
  "names": []
}
